<div class="step-container">
  <h1 class="trips-form__title">Which rhythm do you wish for?</h1>

  <% trip = preferences_form.user_trip_status.trip %>
  <%= form_with model: preferences_form,
                url: trip_preferences_form_path(trip, preferences_form),
                method: :patch,
                data: { turbo_frame: "form_wrapper" },
                class: "step-form" do |f| %>

    <p class="step-subtitle">Select your preferred travel pace</p>

    <div data-controller="icon-slider">
      <div class="icon-slider">
        <div class="icon-slider-track" data-icon-slider-target="track" data-action="click->icon-slider#onTrackClick">
          <div class="icon-slider-thumb" data-icon-slider-target="thumb" data-action="mousedown->icon-slider#startDrag touchstart->icon-slider#startDrag">
            <i class="fa-solid fa-bolt"></i>
          </div>
        </div>
        <input type="hidden"
               name="preferences_form[travel_pace]"
               min="0"
               max="100"
               value="<%= preferences_form.travel_pace || 50 %>"
               data-icon-slider-target="input">
      </div>
    </div>

    <div class="scale-row">
      <span class="left-label">Chill</span>
      <span class="right-label">Intense</span>
    </div>

    <p class="step-subtitle">How many steps a day ?</p>

    <div data-controller="icon-slider">
      <div class="icon-slider">
        <div class="icon-slider-track" data-icon-slider-target="track" data-action="click->icon-slider#onTrackClick">
          <div class="icon-slider-thumb" data-icon-slider-target="thumb" data-action="mousedown->icon-slider#startDrag touchstart->icon-slider#startDrag">
            <i class="fa-solid fa-shoe-prints"></i>
          </div>
        </div>
        <input type="hidden"
               name="preferences_form[steps_per_day]"
               min="0"
               max="20000"
               step="500"
               value="<%= preferences_form.steps_per_day || 10000 %>"
               data-icon-slider-target="input">
      </div>
    </div>

    <div class="scale-row">
      <span class="left-label">0</span>
      <span class="right-label">20k +</span>
    </div>

    <input type="hidden" name="step" value="2">

    <div class="button-row">
      <%= link_to "← Back",
          step1_trip_preferences_form_path(trip, preferences_form),
          data: { turbo_frame: "form_wrapper" },
          class: "trips-form__button trips-form__button--secondary" %>

      <%= f.submit "Next →", class: "trips-form__button trips-form__button--primary" %>
    </div>
  <% end %>
</div>
