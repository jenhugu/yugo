<div id="trip_card_<%= user_trip_status.id %>" class="trip-card trip-card--invitation" data-controller="trip-invitation" data-trip-invitation-user-trip-status-id-value="<%= user_trip_status.id %>">
  <div class="trip-card__image">
    <%# TODO: REFACTO - Replace with dynamic image when image_url column is added to trips table %>
    <%= image_tag "paris-trip.jpg", alt: user_trip_status.trip.name %>
    <div class="trip-card__tag trip-card__tag--pending">Pending invitation</div>
  </div>

  <div class="trip-card__content">
    <div class="trip-card__header">
      <div>
        <h2 class="trip-card__title"><%= user_trip_status.trip.name %></h2>
        <p class="trip-card__dates">
          <%= user_trip_status.trip.destination %> - <%= user_trip_status.trip.start_date.strftime("%b %d") if user_trip_status.trip.start_date %> to <%= user_trip_status.trip.end_date.strftime("%b %d, %Y") if user_trip_status.trip.end_date %>
        </p>
      </div>
      <div class="trip-card__avatar" title="<%= user_trip_status.trip.creator&.first_name.presence || user_trip_status.trip.creator&.email %>">
        <% if user_trip_status.trip.creator&.avatar&.attached? %>
          <%= image_tag user_trip_status.trip.creator.avatar, alt: user_trip_status.trip.creator.first_name.presence || user_trip_status.trip.creator.email %>
        <% else %>
          <%= image_tag "https://i.pravatar.cc/150?u=#{user_trip_status.trip.creator&.id}", alt: user_trip_status.trip.creator.first_name.presence || user_trip_status.trip.creator.email %>
        <% end %>
      </div>
    </div>

    <div class="trip-card__invitation-message">
      <p class="trip-card__invitation-text">
        <strong><%= user_trip_status.trip.user_trip_statuses.find_by(role: 'creator')&.user&.first_name || "Someone" %></strong> has invited you to join "<strong><%= user_trip_status.trip.name %></strong>"
      </p>
      <p class="trip-card__invitation-description">
        Join this trip to share your preferences, review personalized suggestions, and help shape the final itinerary together.
      </p>
    </div>

    <div class="trip-card__invitation-actions">
      <%= button_to "Accept", accept_invitation_user_trip_status_path(user_trip_status), method: :patch, class: "trip-card__button trip-card__button--accept" %>
    </div>
  </div>
</div>
